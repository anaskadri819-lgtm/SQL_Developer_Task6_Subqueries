-- 1. Scalar subquery example
SELECT name, salary
FROM employees
WHERE salary > (SELECT AVG(salary) FROM employees);

-- 2. IN subquery example
SELECT name
FROM employees
WHERE dept_id IN (SELECT id FROM departments WHERE location = 'Delhi');

-- 3. EXISTS example
SELECT name
FROM employees e
WHERE EXISTS (
    SELECT 1 FROM projects p WHERE p.emp_id = e.id
);

-- 4. Correlated subquery example
SELECT name, salary
FROM employees e
WHERE salary > (
    SELECT AVG(salary) FROM employees WHERE dept_id = e.dept_id
);

-- 5. Derived table (subquery in FROM)
SELECT d.dept_id, d.avg_salary
FROM (
    SELECT dept_id, AVG(salary) AS avg_salary
    FROM employees
    GROUP BY dept_id
) d;
